<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Signika:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" type="x-icon" th:href="@{/img/dart.png}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/learnStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/meaningStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/rankStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/practiceStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/profileStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/storeStyle.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/searchFriend.css}">
    <link rel="stylesheet" th:href="@{/css/util.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/mission.css}">
    <link id="ChatStyleSheet" rel="stylesheet" th:href="@{/css/chatWindow.css}">
    <title>Monolingo - Học tiếng anh vui vẻ</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script defer th:src="@{/javascript/main.js}"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script th:src="@{/javascript/chat.js}"></script>

</head>
<div id="metadata" th:data-account-id="${accountId}"></div>
<body class="container">

<div class="menu-container">

    <header>
        <h1 class="logo">Monolingo</h1>
    </header>

    <div class="menu">

        <a id="fragment-learn" th:href="@{fragments/learn.html}" class="menu--tabs">
            <img alt=""
                 th:src="@{/img/house.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text">HỌC</span>
        </a>

        <a id="fragment-practice" th:href="@{fragments/practice.html}" class="menu--tabs">
            <img alt=""
                 th:src="@{/img/dumbbell.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text">LUYỆN TẬP</span>
        </a>

        <a id="fragment-rank" th:href="@{fragments/rank.html}" class="menu--tabs">
            <img alt=""
                 th:src="@{/img/podium.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text">BẢNG XẾP HẠNG</span>
        </a>

        <a id="fragment-mission" th:href="@{fragments/mission.html}" class="menu--tabs">
            <img alt=""
                 th:src="@{/img/treasure-chest.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text">NHIỆM VỤ</span>
        </a>

        <a id="fragment-store" th:href="@{fragments/store.html}" class="menu--tabs">
            <img alt=""
                 th:src="@{/img/shop.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text">CỬA HÀNG</span>
        </a>

        <div id="fragment-more" href="#" class="menu--tabs menu--option">
            <img alt=""
                 th:src="@{/img/more.png}"
                 class="menu--tabs-icon">
            <span class="menu--tabs-text ">XEM THÊM</span>
            <div class="menu-content">
                <a id="fragment-profile" class="menu--option--item">
                    <h3 class="menu--tabs-text">Tạo hồ sơ</h3>
                    <img th:src="@{/img/boy.png}" class="icon--option" alt="">
                </a>
                <a class="menu--option--item">
                    <h3 class="menu--tabs-text">Hỗ trợ</h3>
                    <img th:src="@{/img/question.png}" class="icon--option" alt="">
                </a>
                <a class="menu--option--item">
                    <h3 class="menu--tabs-text">Cài đặt</h3>
                    <img th:src="@{/img/setting.png}" class="icon--option" alt="">
                </a>
                <a class="menu--option--item" id="fragment-logout">
                    <h3 class="menu--tabs-text">Đăng xuất</h3>
                    <img th:src="@{/img/logout.png}" class="icon--option" alt="">
                </a>
            </div>

        </div>


    </div>

</div>
</div>

<main class="main-container">

    <div class="sticky-container">
        <div>
            <form class="search--form" method="GET">
                <div class="search--panel">
                    <input type="text"
                           name="word"
                           class="search--bar"
                           placeholder="Tìm kiếm từ vựng"
                           autocomplete="false"
                           maxlength="50">

                    <div class="search--results-panel">
                        <ul class="search--results">
                        </ul>
                    </div>
                </div>

                <span style="display: grid">
                        <button type="submit" class="search--btn">
                            <img alt=""
                                 th:src="@{/img/search.png}"
                                 class="search--btn-icon">
                        </button>
                    </span>

            </form>
        </div>

        <div class="resource-panel">

            <div class="resource--items">
                <img alt=""
                     th:src="@{/img/flame.png}"
                     class="resource--items-icon">
                <span class="
                            resource--items-text
                            resource--items-text-streak"
                      th:text="${userData.numberOfConsecutiveDay}"></span>
            </div>

            <div class="resource--items">
                <img alt=""
                     th:src="@{/img/gems.png}"
                     class="resource--items-icon">
                <span class="
                            resource--items-text
                            resource--items-text-gem"
                      th:text="${userData.balance}"></span>
            </div>

            <div class="resource--items">
                <img alt=""
                     th:src="@{/img/heart.png}"
                     class="resource--items-icon">
                <span class="
                            resource--items-text
                            resource--items-text-heart"
                      th:text="${userData.hearts}"></span>
            </div>


        </div>
    </div>

    <div class="view-container">

        <div class="content-container">
        </div>

        <aside class="aside-container">
            <div class="mission-container" id="mission-container-side">
                <div class="mission--header">
                    <h2>Nhiệm Vụ Hằng Ngày</h2>
                    <a href="#" class="mission--header-detail">Xem tất cả</a>
                </div>

                <div class="mission">
                    <div class="mission--items" th:each="mission, stat : ${dailyMissions}" th:if="${stat.index < 2}">
                        <img alt=""
                             th:src="@{/img/dart.png}"
                             class="mission--items-icon">
                        <h3 th:text="${mission.getMission().getName()}">
                        </h3>
                        <h4 class="mission--sub-header" th:text="${mission.getMission().getDescription()}">
                        </h4>

                        <div class="mission--progress-bound">
                            <div class="mission--progress-bar">
                                <div class="mission--progress" th:style="|width: ${mission.getProgress() / mission.getMission().getTarget() * 100}%|"></div>
                                <h3 class="mission--progress-text" th:text="${mission.getProgress()} + '/' + ${#strings.toString(mission.getMission().getTarget())}"></h3>
                            </div>

                            <img alt=""
                                 th:src="@{/img/treasure-chest.png}"
                                 class="mission--progress-icon">
                        </div>
                    </div>

                </div>

            </div>

        </aside>
        <div class="friend-icon-toggle" id="show-follow-button" onclick="openPanelFollow()">
            <img th:src="@{/img/group.png}">
        </div>
        <div class="chat-container-message">
<!--            <div class="chat-container" id="chat-container">-->
<!--                <div class="chat-header">-->
<!--                    <h3>John Doe</h3>-->
<!--                    <div>-->
<!--                        <button onclick="toggleChat()">_</button>-->
<!--                        <button onclick="closeChat()">x</button>-->

<!--                    </div>-->
<!--                </div>-->
<!--                <div class="chat-messages" id="chat-messages">-->
<!--                    <div class="friend-message">-->
<!--                        <div class="avatar-message">N</div>-->
<!--                        <p class="text-message">-->
<!--                            Hello from friend-->
<!--                        </p>-->
<!--                    </div>-->
<!--                    <div class="my-message">-->
<!--                        <p class="my-text-message">-->
<!--                            Hello from friend asf UOPf a ifug AO Auflah-->
<!--                        </p>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="chat-input">-->
<!--                    <input type="text" class="message-input" placeholder="Type your message..." onkeypress="clickPress(event)">-->
<!--                    <button class="send-message-button" onclick="sendMyMessage()"><i class="fa-solid fa-paper-plane"-->
<!--                                                                                     style="font-size: 20px;"></i></button>-->
<!--                </div>-->
<!--            </div>-->

        </div>

        <div class="following-container" id="follow-panel" hidden>
            <div class="friend-follow" th:if="${current}">
                <div class="friend-follower">
                    <div class="header-follow" style="display: flex;align-items: center;padding-top: 15px;margin-bottom: 15px;justify-content: space-between">
                        <div style="display: flex;align-items: center">
                            <p style="font-weight: bold; font-size: 20px;padding-left: 30px" >
                                Đang theo dõi
                            </p>
                            <img th:src="@{/img/interview.png}" style="width: 30px;object-fit: contain;margin-left: 10px">
                        </div>
                        <img th:src="@{/img/close.png}" style="width: 20px;margin-right: 30px;cursor: pointer" onclick="closePanelFollow()">

                    </div>


                    <div class="friend--followers" th:each="friendExp, stat : ${friendsExps}" style="padding-left: 15px">
                        <div
                                class="friend--follower"
                                th:data-id="${friendExp.getFriend().getId().getFollowingId()}"
                        >
                            <div class="friend--follower-index" th:text="${stat.index + 1}"></div>
                            <p
                                    class="friend--follower-name"
                                    th:text="${friendExp.getFriend().getFollowing().getName()}"
                            ></p>
<!--                            <p class="friend&#45;&#45;follower-exp" th:text="${friendExp.getExp()}"></p>-->
                            <img class ="chat-friend" th:src="@{/img/chat.png}" style="width: 30px;object-fit: contain" th:data-friend-id="${friendExp.getFriend().getId().getFollowingId()}" onclick="handleOnclickChatFriend(event)">
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>


</main>

</body>
</html>